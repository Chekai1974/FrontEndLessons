<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    



    <script>
        // const requestURL = 'https://jsonplaceholder.typicode.com/users';

        // let xhr =  new XMLHttpRequest();
        //                             // асинхроность
        // xhr.open("GET", requestURL, true);

        // xhr.onload = function () {
        // console.log('DONE', xhr.response); // readyState будет равно 4
        // };
        

        // xhr.onload = function () {
        // var users = JSON.parse(xhr.responseText);

        // if (xhr.readyState == 4 && xhr.status == "200") {
        //     console.table(users);
        //     } else {
        //     console.error(users);
        //     }
        // }
        // xhr.send()

        // const requestURL = 'https://jsonplaceholder.typicode.com/users';
        // let data = {};
        // data.firstname = "Марко";
        // data.lastname  = "Сливка";
        // let json = JSON.stringify(data);

        // let xhr = new XMLHttpRequest();
        // xhr.open("POST", requestURL, true);


        // xhr.setRequestHeader('Content-type','application/json; charset=utf-8');


        // xhr.onload = function () {
        // let data = JSON.parse(xhr.responseText);
        // if (xhr.readyState == 4 && xhr.status == "201") {
        // console.log("Сервер вернул нам: ", data);
        // } else {
        // console.error("error");
        // }
        // }
        // xhr.send(json);

        // const promise1 = new Promise((resolve, reject)=>{
        //     setTimeout(()=>{
        //         resolve("Here i'm call resolve");
        //     }, 5000);
        // })

        // promise1.then((info)=>{
        //     console.log('Resolve', info)
        // })
        // console.log(promise1);
        const requestURL = 'https://jsonplaceholder.typicode.com/users';


        function sendRequest(method, url, body = null) {
        const headers = {
        'Content-Type': 'application/json'
        }


        return fetch(url, {
        method: method,
        headers: headers
        }).then(response => {
        if (response.ok) {
            return response.json()
        }


        return response.json().then(error => {
            const e = new Error('Что-то пошло не так')
            e.data = error
            throw e
        })
        })
        }


        sendRequest('GET', requestURL)
        .then(data => console.log(data))
        .catch(err => console.log(err))

    </script>
</body>
</html>